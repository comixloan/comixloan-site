<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core">
<h:body>

	<ui:composition template="/theme/base.xhtml">

		<ui:define name="content">
			<h1>Loan</h1>

			<h:form id="action_giveback" class="formhide">
				<h:commandButton action="#{loanController.giveBack}"
					value="Segna come restituito">
				</h:commandButton>
			</h:form>

			<h:form id="action_loadInformation" class="formhide">
				<h:commandButton action="#{loanController.getLoanInformation}"
					value="Informazioni">
				</h:commandButton>
			</h:form>

			<table class="table table-hover">
				<thead>
					<tr>
						<td>Utente</td>
						<td>Data Prestito</td>
						<td></td>
					</tr>
				</thead>
				<tbody>
					<c:forEach var="loan" items="#{loanController.userLoans}">
						<tr>
							<td>${loan.user.userName}</td>
							<td>${loan.startDate}</td>
							<td><a href="#"
								onclick='$("#action_giveback").action({id: #{loan.id}});'>Segna
									come restituito</a> <br /> <a href="#"
								onclick='$("#action_loadInformation").action({id: #{loan.id}});'>Impormazioni</a></td>
						</tr>
					</c:forEach>
				</tbody>
			</table>

			<div>
				<h:link value="Crea nuovo prestito" outcome="/loan/add.xhtml" />
			</div>
		</ui:define>

		<ui:define name="title">
			Prestiti
		</ui:define>

	</ui:composition>

</h:body>

</html>
